{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport isNil from 'lodash/isNil';\nimport Star from '@rsuite/icons/legacy/Star';\nimport { useClassNames, useControlled, shallowEqualArray, SIZE, KEY_VALUES } from '../utils';\nimport { transformValueToCharacterMap, transformCharacterMapToValue } from './utils';\nimport Character from './Character';\nimport Plaintext from '../Plaintext';\nvar Rate = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'ul' : _props$as,\n      _props$character = props.character,\n      character = _props$character === void 0 ? /*#__PURE__*/React.createElement(Star, null) : _props$character,\n      className = props.className,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'rate' : _props$classPrefix,\n      disabled = props.disabled,\n      _props$max = props.max,\n      max = _props$max === void 0 ? 5 : _props$max,\n      readOnly = props.readOnly,\n      vertical = props.vertical,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'md' : _props$size,\n      color = props.color,\n      _props$allowHalf = props.allowHalf,\n      allowHalf = _props$allowHalf === void 0 ? false : _props$allowHalf,\n      valueProp = props.value,\n      _props$defaultValue = props.defaultValue,\n      defaultValue = _props$defaultValue === void 0 ? 0 : _props$defaultValue,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      plaintext = props.plaintext,\n      onChange = props.onChange,\n      renderCharacter = props.renderCharacter,\n      onChangeActive = props.onChangeActive,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"character\", \"className\", \"classPrefix\", \"disabled\", \"max\", \"readOnly\", \"vertical\", \"size\", \"color\", \"allowHalf\", \"value\", \"defaultValue\", \"cleanable\", \"plaintext\", \"onChange\", \"renderCharacter\", \"onChangeActive\"]);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var getCharacterMap = useCallback(function (v) {\n    return transformValueToCharacterMap(typeof v !== 'undefined' ? v : value, max, allowHalf);\n  }, [allowHalf, max, value]);\n\n  var _useState = useState(getCharacterMap()),\n      characterMap = _useState[0],\n      setCharacterMap = _useState[1];\n\n  var hoverValue = transformCharacterMapToValue(characterMap);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix;\n\n  var classes = merge(className, withClassPrefix(size, color, {\n    disabled: disabled,\n    readonly: readOnly\n  }));\n  var resetCharacterMap = useCallback(function () {\n    setCharacterMap(getCharacterMap());\n  }, [getCharacterMap]);\n  useEffect(function () {\n    // Update characterMap when value is updated.\n    setCharacterMap(getCharacterMap(valueProp)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [valueProp]);\n  var handleMouseLeave = useCallback(function (event) {\n    resetCharacterMap();\n    onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(value, event);\n  }, [onChangeActive, resetCharacterMap, value]);\n  var handleChangeValue = useCallback(function (index, event) {\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (cleanable && value === nextValue && getCharacterMap(value)[index] === characterMap[index]) {\n      nextValue = 0;\n    }\n\n    if (nextValue !== value) {\n      setValue(nextValue);\n      setCharacterMap(getCharacterMap(nextValue));\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    }\n  }, [characterMap, cleanable, getCharacterMap, onChange, setValue, value]);\n  var handleKeyDown = useCallback(function (index, event) {\n    var key = event.key;\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (key === KEY_VALUES.RIGHT && nextValue < max) {\n      nextValue = allowHalf ? nextValue + 0.5 : nextValue + 1;\n    } else if (key === KEY_VALUES.LEFT && nextValue > 0) {\n      nextValue = allowHalf ? nextValue - 0.5 : nextValue - 1;\n    }\n\n    setCharacterMap(getCharacterMap(nextValue));\n\n    if (key === KEY_VALUES.ENTER) {\n      handleChangeValue(index, event);\n    }\n  }, [allowHalf, characterMap, getCharacterMap, handleChangeValue, max]);\n  var handleChangeCharacterMap = useCallback(function (index, key, event) {\n    var nextCharacterMap = characterMap.map(function (_item, i) {\n      if (i === index && key === 'before' && allowHalf) {\n        return 0.5;\n      }\n\n      return index >= i ? 1 : 0;\n    });\n\n    if (!shallowEqualArray(characterMap, nextCharacterMap)) {\n      setCharacterMap(nextCharacterMap);\n      onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(transformCharacterMapToValue(nextCharacterMap), event);\n    }\n  }, [allowHalf, characterMap, onChangeActive]);\n  var handleClick = useCallback(function (index, key, event) {\n    handleChangeCharacterMap(index, key, event);\n    handleChangeValue(index, event);\n  }, [handleChangeCharacterMap, handleChangeValue]);\n\n  if (plaintext) {\n    return /*#__PURE__*/React.createElement(Plaintext, {\n      localeKey: \"notSelected\",\n      className: className\n    }, !isNil(value) ? value + \"(\" + max + \")\" : null);\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"radiogroup\",\n    tabIndex: 0\n  }, rest, {\n    ref: ref,\n    className: classes,\n    onMouseLeave: handleMouseLeave\n  }), characterMap.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(Character, {\n      role: \"radio\",\n      \"aria-posinset\": index + 1,\n      \"aria-setsize\": max,\n      \"aria-checked\": value === index + 1,\n      key: index,\n      status: item,\n      disabled: disabled || readOnly,\n      vertical: vertical,\n      onClick: function onClick(key, event) {\n        return handleClick(index, key, event);\n      },\n      onKeyDown: function onKeyDown(event) {\n        return handleKeyDown(index, event);\n      },\n      onMouseMove: function onMouseMove(key, event) {\n        return handleChangeCharacterMap(index, key, event);\n      }\n    }, renderCharacter ? renderCharacter(hoverValue, index) : character);\n  }));\n});\nRate.displayName = 'Rate';\nRate.propTypes = {\n  allowHalf: PropTypes.bool,\n  character: PropTypes.node,\n  classPrefix: PropTypes.string,\n  cleanable: PropTypes.bool,\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  renderCharacter: PropTypes.func,\n  readOnly: PropTypes.bool,\n  size: PropTypes.oneOf(SIZE),\n  value: PropTypes.number,\n  vertical: PropTypes.bool,\n  onChange: PropTypes.func,\n  onChangeActive: PropTypes.func\n};\nexport default Rate;","map":{"version":3,"sources":["/Users/supriyomal/Documents/GitHub/LeetQuestion/node_modules/rsuite/esm/Rate/Rate.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useCallback","useEffect","useState","PropTypes","isNil","Star","useClassNames","useControlled","shallowEqualArray","SIZE","KEY_VALUES","transformValueToCharacterMap","transformCharacterMapToValue","Character","Plaintext","Rate","forwardRef","props","ref","_props$as","as","Component","_props$character","character","createElement","className","_props$classPrefix","classPrefix","disabled","_props$max","max","readOnly","vertical","_props$size","size","color","_props$allowHalf","allowHalf","valueProp","value","_props$defaultValue","defaultValue","_props$cleanable","cleanable","plaintext","onChange","renderCharacter","onChangeActive","rest","_useControlled","setValue","getCharacterMap","v","_useState","characterMap","setCharacterMap","hoverValue","_useClassNames","merge","withClassPrefix","classes","readonly","resetCharacterMap","handleMouseLeave","event","handleChangeValue","index","nextValue","handleKeyDown","key","RIGHT","LEFT","ENTER","handleChangeCharacterMap","nextCharacterMap","map","_item","i","handleClick","localeKey","role","tabIndex","onMouseLeave","item","status","onClick","onKeyDown","onMouseMove","displayName","propTypes","bool","node","string","number","func","oneOf"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport isNil from 'lodash/isNil';\nimport Star from '@rsuite/icons/legacy/Star';\nimport { useClassNames, useControlled, shallowEqualArray, SIZE, KEY_VALUES } from '../utils';\nimport { transformValueToCharacterMap, transformCharacterMapToValue } from './utils';\nimport Character from './Character';\nimport Plaintext from '../Plaintext';\nvar Rate = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'ul' : _props$as,\n      _props$character = props.character,\n      character = _props$character === void 0 ? /*#__PURE__*/React.createElement(Star, null) : _props$character,\n      className = props.className,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'rate' : _props$classPrefix,\n      disabled = props.disabled,\n      _props$max = props.max,\n      max = _props$max === void 0 ? 5 : _props$max,\n      readOnly = props.readOnly,\n      vertical = props.vertical,\n      _props$size = props.size,\n      size = _props$size === void 0 ? 'md' : _props$size,\n      color = props.color,\n      _props$allowHalf = props.allowHalf,\n      allowHalf = _props$allowHalf === void 0 ? false : _props$allowHalf,\n      valueProp = props.value,\n      _props$defaultValue = props.defaultValue,\n      defaultValue = _props$defaultValue === void 0 ? 0 : _props$defaultValue,\n      _props$cleanable = props.cleanable,\n      cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n      plaintext = props.plaintext,\n      onChange = props.onChange,\n      renderCharacter = props.renderCharacter,\n      onChangeActive = props.onChangeActive,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"character\", \"className\", \"classPrefix\", \"disabled\", \"max\", \"readOnly\", \"vertical\", \"size\", \"color\", \"allowHalf\", \"value\", \"defaultValue\", \"cleanable\", \"plaintext\", \"onChange\", \"renderCharacter\", \"onChangeActive\"]);\n\n  var _useControlled = useControlled(valueProp, defaultValue),\n      value = _useControlled[0],\n      setValue = _useControlled[1];\n\n  var getCharacterMap = useCallback(function (v) {\n    return transformValueToCharacterMap(typeof v !== 'undefined' ? v : value, max, allowHalf);\n  }, [allowHalf, max, value]);\n\n  var _useState = useState(getCharacterMap()),\n      characterMap = _useState[0],\n      setCharacterMap = _useState[1];\n\n  var hoverValue = transformCharacterMapToValue(characterMap);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix;\n\n  var classes = merge(className, withClassPrefix(size, color, {\n    disabled: disabled,\n    readonly: readOnly\n  }));\n  var resetCharacterMap = useCallback(function () {\n    setCharacterMap(getCharacterMap());\n  }, [getCharacterMap]);\n  useEffect(function () {\n    // Update characterMap when value is updated.\n    setCharacterMap(getCharacterMap(valueProp)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [valueProp]);\n  var handleMouseLeave = useCallback(function (event) {\n    resetCharacterMap();\n    onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(value, event);\n  }, [onChangeActive, resetCharacterMap, value]);\n  var handleChangeValue = useCallback(function (index, event) {\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (cleanable && value === nextValue && getCharacterMap(value)[index] === characterMap[index]) {\n      nextValue = 0;\n    }\n\n    if (nextValue !== value) {\n      setValue(nextValue);\n      setCharacterMap(getCharacterMap(nextValue));\n      onChange === null || onChange === void 0 ? void 0 : onChange(nextValue, event);\n    }\n  }, [characterMap, cleanable, getCharacterMap, onChange, setValue, value]);\n  var handleKeyDown = useCallback(function (index, event) {\n    var key = event.key;\n    var nextValue = transformCharacterMapToValue(characterMap);\n\n    if (key === KEY_VALUES.RIGHT && nextValue < max) {\n      nextValue = allowHalf ? nextValue + 0.5 : nextValue + 1;\n    } else if (key === KEY_VALUES.LEFT && nextValue > 0) {\n      nextValue = allowHalf ? nextValue - 0.5 : nextValue - 1;\n    }\n\n    setCharacterMap(getCharacterMap(nextValue));\n\n    if (key === KEY_VALUES.ENTER) {\n      handleChangeValue(index, event);\n    }\n  }, [allowHalf, characterMap, getCharacterMap, handleChangeValue, max]);\n  var handleChangeCharacterMap = useCallback(function (index, key, event) {\n    var nextCharacterMap = characterMap.map(function (_item, i) {\n      if (i === index && key === 'before' && allowHalf) {\n        return 0.5;\n      }\n\n      return index >= i ? 1 : 0;\n    });\n\n    if (!shallowEqualArray(characterMap, nextCharacterMap)) {\n      setCharacterMap(nextCharacterMap);\n      onChangeActive === null || onChangeActive === void 0 ? void 0 : onChangeActive(transformCharacterMapToValue(nextCharacterMap), event);\n    }\n  }, [allowHalf, characterMap, onChangeActive]);\n  var handleClick = useCallback(function (index, key, event) {\n    handleChangeCharacterMap(index, key, event);\n    handleChangeValue(index, event);\n  }, [handleChangeCharacterMap, handleChangeValue]);\n\n  if (plaintext) {\n    return /*#__PURE__*/React.createElement(Plaintext, {\n      localeKey: \"notSelected\",\n      className: className\n    }, !isNil(value) ? value + \"(\" + max + \")\" : null);\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    role: \"radiogroup\",\n    tabIndex: 0\n  }, rest, {\n    ref: ref,\n    className: classes,\n    onMouseLeave: handleMouseLeave\n  }), characterMap.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(Character, {\n      role: \"radio\",\n      \"aria-posinset\": index + 1,\n      \"aria-setsize\": max,\n      \"aria-checked\": value === index + 1,\n      key: index,\n      status: item,\n      disabled: disabled || readOnly,\n      vertical: vertical,\n      onClick: function onClick(key, event) {\n        return handleClick(index, key, event);\n      },\n      onKeyDown: function onKeyDown(event) {\n        return handleKeyDown(index, event);\n      },\n      onMouseMove: function onMouseMove(key, event) {\n        return handleChangeCharacterMap(index, key, event);\n      }\n    }, renderCharacter ? renderCharacter(hoverValue, index) : character);\n  }));\n});\nRate.displayName = 'Rate';\nRate.propTypes = {\n  allowHalf: PropTypes.bool,\n  character: PropTypes.node,\n  classPrefix: PropTypes.string,\n  cleanable: PropTypes.bool,\n  defaultValue: PropTypes.number,\n  disabled: PropTypes.bool,\n  max: PropTypes.number,\n  renderCharacter: PropTypes.func,\n  readOnly: PropTypes.bool,\n  size: PropTypes.oneOf(SIZE),\n  value: PropTypes.number,\n  vertical: PropTypes.bool,\n  onChange: PropTypes.func,\n  onChangeActive: PropTypes.func\n};\nexport default Rate;"]},"metadata":{},"sourceType":"module"}