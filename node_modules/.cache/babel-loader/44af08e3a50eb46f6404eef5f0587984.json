{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Attachment from '@rsuite/icons/legacy/Attachment';\nimport Reload from '@rsuite/icons/Reload';\nimport { previewFile, useClassNames } from '../utils';\nimport CloseButton from '../CloseButton';\n/**\n * Format display file size\n * @param size\n */\n\nexport var formatSize = function formatSize(size) {\n  if (size === void 0) {\n    size = 0;\n  }\n\n  var K = 1024;\n  var M = 1024 * 1024;\n  var G = 1024 * 1024 * 1024;\n\n  if (size > G) {\n    return (size / G).toFixed(2) + \"GB\";\n  }\n\n  if (size > M) {\n    return (size / M).toFixed(2) + \"MB\";\n  }\n\n  if (size > K) {\n    return (size / K).toFixed(2) + \"KB\";\n  }\n\n  return size + \"B\";\n};\nvar UploadFileItem = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      disabled = props.disabled,\n      _props$allowReupload = props.allowReupload,\n      allowReupload = _props$allowReupload === void 0 ? true : _props$allowReupload,\n      file = props.file,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'uploader-file-item' : _props$classPrefix,\n      _props$listType = props.listType,\n      listType = _props$listType === void 0 ? 'text' : _props$listType,\n      className = props.className,\n      _props$removable = props.removable,\n      removable = _props$removable === void 0 ? true : _props$removable,\n      _props$maxPreviewFile = props.maxPreviewFileSize,\n      maxPreviewFileSize = _props$maxPreviewFile === void 0 ? 1024 * 1024 * 5 : _props$maxPreviewFile,\n      locale = props.locale,\n      renderFileInfo = props.renderFileInfo,\n      renderThumbnail = props.renderThumbnail,\n      onPreview = props.onPreview,\n      onCancel = props.onCancel,\n      onReupload = props.onReupload,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"disabled\", \"allowReupload\", \"file\", \"classPrefix\", \"listType\", \"className\", \"removable\", \"maxPreviewFileSize\", \"locale\", \"renderFileInfo\", \"renderThumbnail\", \"onPreview\", \"onCancel\", \"onReupload\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix,\n      prefix = _useClassNames.prefix;\n\n  var classes = merge(className, withClassPrefix(listType, {\n    disabled: disabled,\n    'has-error': file.status === 'error'\n  }));\n\n  var _useState = useState(file.url ? file.url : null),\n      previewImage = _useState[0],\n      setPreviewImage = _useState[1];\n  /**\n   * Get thumbnail of image file\n   */\n\n\n  var getThumbnail = useCallback(function (callback) {\n    var _file$blobFile;\n\n    if (!~['picture-text', 'picture'].indexOf(listType)) {\n      return;\n    } // The thumbnail file size cannot be larger than the preset value.\n\n\n    if (!file.blobFile || (file === null || file === void 0 ? void 0 : (_file$blobFile = file.blobFile) === null || _file$blobFile === void 0 ? void 0 : _file$blobFile.size) > maxPreviewFileSize) {\n      return;\n    }\n\n    previewFile(file.blobFile, callback);\n  }, [file, listType, maxPreviewFileSize]);\n  useEffect(function () {\n    if (!file.url) {\n      getThumbnail(function (previewImage) {\n        setPreviewImage(previewImage);\n      });\n    }\n  }, [file.url, getThumbnail]);\n  var handlePreview = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onPreview === null || onPreview === void 0 ? void 0 : onPreview(file, event);\n  }, [disabled, file, onPreview]);\n  var handleRemove = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onCancel === null || onCancel === void 0 ? void 0 : onCancel(file.fileKey, event);\n  }, [disabled, file.fileKey, onCancel]);\n  var handleReupload = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onReupload === null || onReupload === void 0 ? void 0 : onReupload(file, event);\n  }, [disabled, file, onReupload]);\n  /**\n   * Rendering progress bar\n   */\n\n  var renderProgressBar = function renderProgressBar() {\n    var _file$progress = file.progress,\n        progress = _file$progress === void 0 ? 0 : _file$progress,\n        status = file.status;\n    var show = !disabled && status === 'uploading';\n    var visibility = show ? 'visible' : 'hidden';\n    var wrapStyle = {\n      visibility: visibility\n    };\n    var progressbarStyle = {\n      width: progress + \"%\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress'),\n      style: wrapStyle\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress-bar'),\n      style: progressbarStyle\n    }));\n  };\n\n  var renderPreview = function renderPreview() {\n    var thumbnail = previewImage ? /*#__PURE__*/React.createElement(\"img\", {\n      role: \"presentation\",\n      src: previewImage,\n      alt: file.name,\n      onClick: handlePreview\n    }) : /*#__PURE__*/React.createElement(Attachment, {\n      className: prefix('icon')\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('preview')\n    }, renderThumbnail ? renderThumbnail(file, thumbnail) : thumbnail);\n  };\n  /**\n   * Render the loading state.\n   */\n\n\n  var renderIcon = function renderIcon() {\n    var uploading = file.status === 'uploading';\n    var classes = prefix('icon-wrapper', {\n      'icon-loading': uploading\n    });\n\n    if (uploading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: prefix('icon')\n      }));\n    }\n\n    if (listType === 'picture' || listType === 'picture-text') {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes\n    }, /*#__PURE__*/React.createElement(Attachment, {\n      className: prefix('icon')\n    }));\n  };\n  /**\n   * Render the remove file button.\n   */\n\n\n  var renderRemoveButton = function renderRemoveButton() {\n    if (!removable) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(CloseButton, {\n      className: prefix('btn-remove'),\n      onClick: handleRemove\n    });\n  };\n  /**\n   * Render error messages.\n   */\n\n\n  var renderErrorStatus = function renderErrorStatus() {\n    if (file.status === 'error') {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('status')\n      }, /*#__PURE__*/React.createElement(\"span\", null, locale === null || locale === void 0 ? void 0 : locale.error), allowReupload && /*#__PURE__*/React.createElement(\"a\", {\n        role: \"button\",\n        tabIndex: -1,\n        onClick: handleReupload\n      }, /*#__PURE__*/React.createElement(Reload, {\n        className: prefix('icon-reupload')\n      })));\n    }\n\n    return null;\n  };\n  /**\n   * Render file size.\n   */\n\n\n  var renderFileSize = function renderFileSize() {\n    if (file.status !== 'error' && file.blobFile) {\n      var _file$blobFile2;\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: prefix('size')\n      }, formatSize(file === null || file === void 0 ? void 0 : (_file$blobFile2 = file.blobFile) === null || _file$blobFile2 === void 0 ? void 0 : _file$blobFile2.size));\n    }\n\n    return null;\n  };\n  /**\n   * Render file panel\n   */\n\n\n  var renderFilePanel = function renderFilePanel() {\n    var fileElement = /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('title'),\n      onClick: handlePreview\n    }, file.name);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('panel')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('content')\n    }, renderFileInfo ? renderFileInfo(file, fileElement) : fileElement, renderErrorStatus(), renderFileSize()));\n  };\n\n  if (listType === 'picture') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderErrorStatus(), renderRemoveButton());\n  }\n\n  if (listType === 'picture-text') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    className: classes\n  }), renderIcon(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n});\nUploadFileItem.displayName = 'UploadFileItem';\nUploadFileItem.propTypes = {\n  locale: PropTypes.any,\n  file: PropTypes.object.isRequired,\n  listType: PropTypes.oneOf(['text', 'picture-text', 'picture']),\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  maxPreviewFileSize: PropTypes.number,\n  classPrefix: PropTypes.string,\n  removable: PropTypes.bool,\n  allowReupload: PropTypes.bool,\n  renderFileInfo: PropTypes.func,\n  renderThumbnail: PropTypes.func,\n  onCancel: PropTypes.func,\n  onPreview: PropTypes.func,\n  onReupload: PropTypes.func\n};\nexport default UploadFileItem;","map":{"version":3,"sources":["/Users/supriyomal/Documents/GitHub/LeetQuestion/node_modules/rsuite/esm/Uploader/UploadFileItem.js"],"names":["_extends","_objectWithoutPropertiesLoose","React","useCallback","useEffect","useState","PropTypes","Attachment","Reload","previewFile","useClassNames","CloseButton","formatSize","size","K","M","G","toFixed","UploadFileItem","forwardRef","props","ref","_props$as","as","Component","disabled","_props$allowReupload","allowReupload","file","_props$classPrefix","classPrefix","_props$listType","listType","className","_props$removable","removable","_props$maxPreviewFile","maxPreviewFileSize","locale","renderFileInfo","renderThumbnail","onPreview","onCancel","onReupload","rest","_useClassNames","merge","withClassPrefix","prefix","classes","status","_useState","url","previewImage","setPreviewImage","getThumbnail","callback","_file$blobFile","indexOf","blobFile","handlePreview","event","handleRemove","fileKey","handleReupload","renderProgressBar","_file$progress","progress","show","visibility","wrapStyle","progressbarStyle","width","createElement","style","renderPreview","thumbnail","role","src","alt","name","onClick","renderIcon","uploading","renderRemoveButton","renderErrorStatus","error","tabIndex","renderFileSize","_file$blobFile2","renderFilePanel","fileElement","displayName","propTypes","any","object","isRequired","oneOf","bool","string","number","func"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React, { useCallback, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport Attachment from '@rsuite/icons/legacy/Attachment';\nimport Reload from '@rsuite/icons/Reload';\nimport { previewFile, useClassNames } from '../utils';\nimport CloseButton from '../CloseButton';\n\n/**\n * Format display file size\n * @param size\n */\nexport var formatSize = function formatSize(size) {\n  if (size === void 0) {\n    size = 0;\n  }\n\n  var K = 1024;\n  var M = 1024 * 1024;\n  var G = 1024 * 1024 * 1024;\n\n  if (size > G) {\n    return (size / G).toFixed(2) + \"GB\";\n  }\n\n  if (size > M) {\n    return (size / M).toFixed(2) + \"MB\";\n  }\n\n  if (size > K) {\n    return (size / K).toFixed(2) + \"KB\";\n  }\n\n  return size + \"B\";\n};\nvar UploadFileItem = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      disabled = props.disabled,\n      _props$allowReupload = props.allowReupload,\n      allowReupload = _props$allowReupload === void 0 ? true : _props$allowReupload,\n      file = props.file,\n      _props$classPrefix = props.classPrefix,\n      classPrefix = _props$classPrefix === void 0 ? 'uploader-file-item' : _props$classPrefix,\n      _props$listType = props.listType,\n      listType = _props$listType === void 0 ? 'text' : _props$listType,\n      className = props.className,\n      _props$removable = props.removable,\n      removable = _props$removable === void 0 ? true : _props$removable,\n      _props$maxPreviewFile = props.maxPreviewFileSize,\n      maxPreviewFileSize = _props$maxPreviewFile === void 0 ? 1024 * 1024 * 5 : _props$maxPreviewFile,\n      locale = props.locale,\n      renderFileInfo = props.renderFileInfo,\n      renderThumbnail = props.renderThumbnail,\n      onPreview = props.onPreview,\n      onCancel = props.onCancel,\n      onReupload = props.onReupload,\n      rest = _objectWithoutPropertiesLoose(props, [\"as\", \"disabled\", \"allowReupload\", \"file\", \"classPrefix\", \"listType\", \"className\", \"removable\", \"maxPreviewFileSize\", \"locale\", \"renderFileInfo\", \"renderThumbnail\", \"onPreview\", \"onCancel\", \"onReupload\"]);\n\n  var _useClassNames = useClassNames(classPrefix),\n      merge = _useClassNames.merge,\n      withClassPrefix = _useClassNames.withClassPrefix,\n      prefix = _useClassNames.prefix;\n\n  var classes = merge(className, withClassPrefix(listType, {\n    disabled: disabled,\n    'has-error': file.status === 'error'\n  }));\n\n  var _useState = useState(file.url ? file.url : null),\n      previewImage = _useState[0],\n      setPreviewImage = _useState[1];\n  /**\n   * Get thumbnail of image file\n   */\n\n\n  var getThumbnail = useCallback(function (callback) {\n    var _file$blobFile;\n\n    if (!~['picture-text', 'picture'].indexOf(listType)) {\n      return;\n    } // The thumbnail file size cannot be larger than the preset value.\n\n\n    if (!file.blobFile || (file === null || file === void 0 ? void 0 : (_file$blobFile = file.blobFile) === null || _file$blobFile === void 0 ? void 0 : _file$blobFile.size) > maxPreviewFileSize) {\n      return;\n    }\n\n    previewFile(file.blobFile, callback);\n  }, [file, listType, maxPreviewFileSize]);\n  useEffect(function () {\n    if (!file.url) {\n      getThumbnail(function (previewImage) {\n        setPreviewImage(previewImage);\n      });\n    }\n  }, [file.url, getThumbnail]);\n  var handlePreview = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onPreview === null || onPreview === void 0 ? void 0 : onPreview(file, event);\n  }, [disabled, file, onPreview]);\n  var handleRemove = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onCancel === null || onCancel === void 0 ? void 0 : onCancel(file.fileKey, event);\n  }, [disabled, file.fileKey, onCancel]);\n  var handleReupload = useCallback(function (event) {\n    if (disabled) {\n      return;\n    }\n\n    onReupload === null || onReupload === void 0 ? void 0 : onReupload(file, event);\n  }, [disabled, file, onReupload]);\n  /**\n   * Rendering progress bar\n   */\n\n  var renderProgressBar = function renderProgressBar() {\n    var _file$progress = file.progress,\n        progress = _file$progress === void 0 ? 0 : _file$progress,\n        status = file.status;\n    var show = !disabled && status === 'uploading';\n    var visibility = show ? 'visible' : 'hidden';\n    var wrapStyle = {\n      visibility: visibility\n    };\n    var progressbarStyle = {\n      width: progress + \"%\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress'),\n      style: wrapStyle\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('progress-bar'),\n      style: progressbarStyle\n    }));\n  };\n\n  var renderPreview = function renderPreview() {\n    var thumbnail = previewImage ? /*#__PURE__*/React.createElement(\"img\", {\n      role: \"presentation\",\n      src: previewImage,\n      alt: file.name,\n      onClick: handlePreview\n    }) : /*#__PURE__*/React.createElement(Attachment, {\n      className: prefix('icon')\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('preview')\n    }, renderThumbnail ? renderThumbnail(file, thumbnail) : thumbnail);\n  };\n  /**\n   * Render the loading state.\n   */\n\n\n  var renderIcon = function renderIcon() {\n    var uploading = file.status === 'uploading';\n    var classes = prefix('icon-wrapper', {\n      'icon-loading': uploading\n    });\n\n    if (uploading) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: prefix('icon')\n      }));\n    }\n\n    if (listType === 'picture' || listType === 'picture-text') {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes\n    }, /*#__PURE__*/React.createElement(Attachment, {\n      className: prefix('icon')\n    }));\n  };\n  /**\n   * Render the remove file button.\n   */\n\n\n  var renderRemoveButton = function renderRemoveButton() {\n    if (!removable) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(CloseButton, {\n      className: prefix('btn-remove'),\n      onClick: handleRemove\n    });\n  };\n  /**\n   * Render error messages.\n   */\n\n\n  var renderErrorStatus = function renderErrorStatus() {\n    if (file.status === 'error') {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('status')\n      }, /*#__PURE__*/React.createElement(\"span\", null, locale === null || locale === void 0 ? void 0 : locale.error), allowReupload && /*#__PURE__*/React.createElement(\"a\", {\n        role: \"button\",\n        tabIndex: -1,\n        onClick: handleReupload\n      }, /*#__PURE__*/React.createElement(Reload, {\n        className: prefix('icon-reupload')\n      })));\n    }\n\n    return null;\n  };\n  /**\n   * Render file size.\n   */\n\n\n  var renderFileSize = function renderFileSize() {\n    if (file.status !== 'error' && file.blobFile) {\n      var _file$blobFile2;\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: prefix('size')\n      }, formatSize(file === null || file === void 0 ? void 0 : (_file$blobFile2 = file.blobFile) === null || _file$blobFile2 === void 0 ? void 0 : _file$blobFile2.size));\n    }\n\n    return null;\n  };\n  /**\n   * Render file panel\n   */\n\n\n  var renderFilePanel = function renderFilePanel() {\n    var fileElement = /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('title'),\n      onClick: handlePreview\n    }, file.name);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('panel')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: prefix('content')\n    }, renderFileInfo ? renderFileInfo(file, fileElement) : fileElement, renderErrorStatus(), renderFileSize()));\n  };\n\n  if (listType === 'picture') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderErrorStatus(), renderRemoveButton());\n  }\n\n  if (listType === 'picture-text') {\n    return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n      ref: ref,\n      className: classes\n    }), renderIcon(), renderPreview(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({}, rest, {\n    ref: ref,\n    className: classes\n  }), renderIcon(), renderFilePanel(), renderProgressBar(), renderRemoveButton());\n});\nUploadFileItem.displayName = 'UploadFileItem';\nUploadFileItem.propTypes = {\n  locale: PropTypes.any,\n  file: PropTypes.object.isRequired,\n  listType: PropTypes.oneOf(['text', 'picture-text', 'picture']),\n  disabled: PropTypes.bool,\n  className: PropTypes.string,\n  maxPreviewFileSize: PropTypes.number,\n  classPrefix: PropTypes.string,\n  removable: PropTypes.bool,\n  allowReupload: PropTypes.bool,\n  renderFileInfo: PropTypes.func,\n  renderThumbnail: PropTypes.func,\n  onCancel: PropTypes.func,\n  onPreview: PropTypes.func,\n  onReupload: PropTypes.func\n};\nexport default UploadFileItem;"]},"metadata":{},"sourceType":"module"}